<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Gastos de Fiorella</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <style>
    /* Asegurar que el body ocupe toda la altura */
    html, body, #root {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { PlusCircle, MinusCircle, DollarSign, TrendingUp, TrendingDown, Calendar, Trash2, Edit2, Save, X } = lucide;

    const ExpenseTracker = () => {
      const [transactions, setTransactions] = useState(() => {
        // Cargar datos del localStorage al inicializar
        const saved = localStorage.getItem('fiorella-transactions');
        return saved ? JSON.parse(saved) : [];
      });
      const [description, setDescription] = useState('');
      const [amount, setAmount] = useState('');
      const [type, setType] = useState('expense');
      const [category, setCategory] = useState('');
      const [editingId, setEditingId] = useState(null);
      const [editValues, setEditValues] = useState({});

      // Guardar en localStorage cada vez que cambien las transacciones
      useEffect(() => {
        localStorage.setItem('fiorella-transactions', JSON.stringify(transactions));
      }, [transactions]);

      const categories = {
        income: ['Sueldo', 'Trabajos Extras', 'Regalos', 'Devoluciones', 'Papas', 'Otros Ingresos'],
        expense: ['Transporte', 'AlimentaciÃ³n', 'Servicios', 'Gasto Innecesario', 'Productos de Limpieza', 'Productos de Cuidado Personal', 'Fotocopias', 'Casa', 'Otros Gastos']
      };

      const addTransaction = () => {
        if (!description || !amount || !category) return;
        
        const newTransaction = {
          id: Date.now(),
          description,
          amount: parseFloat(amount),
          type,
          category,
          date: new Date().toLocaleDateString('es-AR')
        };
        
        setTransactions([newTransaction, ...transactions]);
        setDescription('');
        setAmount('');
        setCategory('');
      };

      const deleteTransaction = (id) => {
        setTransactions(transactions.filter(t => t.id !== id));
      };

      const startEditing = (transaction) => {
        setEditingId(transaction.id);
        setEditValues({
          description: transaction.description,
          amount: transaction.amount,
          category: transaction.category
        });
      };

      const saveEdit = (id) => {
        setTransactions(transactions.map(t => 
          t.id === id 
            ? { ...t, ...editValues, amount: parseFloat(editValues.amount) }
            : t
        ));
        setEditingId(null);
        setEditValues({});
      };

      const cancelEdit = () => {
        setEditingId(null);
        setEditValues({});
      };

      const totalIncome = transactions
        .filter(t => t.type === 'income')
        .reduce((sum, t) => sum + t.amount, 0);

      const totalExpenses = transactions
        .filter(t => t.type === 'expense')
        .reduce((sum, t) => sum + t.amount, 0);

      const balance = totalIncome - totalExpenses;

      // Frases motivacionales segÃºn el balance
      const getMotivationalQuote = () => {
        if (balance > 0) {
          const positiveQuotes = [
            "Â¡Excelente Fiorella! ðŸ’ª EstÃ¡s ahorrando y construyendo tu futuro financiero.",
            "Â¡Vas muy bien! ðŸŒŸ Tus ingresos superan tus gastos, sigue asÃ­.",
            "Â¡IncreÃ­ble gestiÃ³n! ðŸ’š EstÃ¡s en el camino correcto hacia la estabilidad financiera.",
            "Â¡Felicitaciones! ðŸŽ‰ Tu disciplina financiera estÃ¡ dando frutos.",
            "Â¡Eres una crack! âœ¨ Mantener este balance positivo te acerca a tus metas."
          ];
          return positiveQuotes[Math.floor(balance / 1000) % positiveQuotes.length];
        } else {
          const improvementQuotes = [
            "Fio, es momento de revisar tus gastos ðŸ’¡ PequeÃ±os cambios hacen grandes diferencias.",
            "No te preocupes ðŸ¤— Identifica esos 'gastos innecesarios' y verÃ¡s la mejora.",
            "Â¡Tranquila! ðŸ’ª Cada mes es una nueva oportunidad de mejorar tu balance.",
            "Revisa tus categorÃ­as ðŸ“Š Â¿Hay algo que puedas reducir este mes?",
            "Â¡TÃº puedes! ðŸŒŸ EnfÃ³cate en lo esencial y verÃ¡s resultados pronto."
          ];
          return improvementQuotes[Math.abs(Math.floor(balance / 1000)) % improvementQuotes.length];
        }
      };

      const expensesByCategory = transactions
        .filter(t => t.type === 'expense')
        .reduce((acc, t) => {
          acc[t.category] = (acc[t.category] || 0) + t.amount;
          return acc;
        }, {});

      return React.createElement('div', {
        className: "max-w-4xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen"
      }, 
        React.createElement('div', {
          className: "bg-white rounded-xl shadow-lg p-6 mb-6"
        }, [
          React.createElement('h1', {
            key: 'title',
            className: "text-3xl font-bold text-gray-800 mb-2 flex items-center"
          }, [
            React.createElement(DollarSign, { 
              key: 'icon',
              className: "mr-3 text-blue-600"
            }),
            "Control de Gastos de Fiorella"
          ]),
          
          React.createElement('p', {
            key: 'subtitle',
            className: "text-gray-600 mb-6"
          }, "Gestiona tus ingresos y gastos personales de forma inteligente"),

          // Resumen Financiero
          React.createElement('div', {
            key: 'summary',
            className: "grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"
          }, [
            React.createElement('div', {
              key: 'income',
              className: "bg-green-50 p-4 rounded-lg border-l-4 border-green-500"
            }, 
              React.createElement('div', {
                className: "flex items-center justify-between"
              }, [
                React.createElement('div', { key: 'income-content' }, [
                  React.createElement('p', {
                    key: 'income-label',
                    className: "text-green-600 text-sm font-medium"
                  }, "Ingresos"),
                  React.createElement('p', {
                    key: 'income-amount',
                    className: "text-2xl font-bold text-green-700"
                  }, `$${totalIncome.toLocaleString('es-AR')}`)
                ]),
                React.createElement(TrendingUp, {
                  key: 'income-icon',
                  className: "text-green-500",
                  size: 24
                })
              ])
            ),
            
            React.createElement('div', {
              key: 'expenses',
              className: "bg-red-50 p-4 rounded-lg border-l-4 border-red-500"
            }, 
              React.createElement('div', {
                className: "flex items-center justify-between"
              }, [
                React.createElement('div', { key: 'expenses-content' }, [
                  React.createElement('p', {
                    key: 'expenses-label',
                    className: "text-red-600 text-sm font-medium"
                  }, "Gastos"),
                  React.createElement('p', {
                    key: 'expenses-amount',
                    className: "text-2xl font-bold text-red-700"
                  }, `$${totalExpenses.toLocaleString('es-AR')}`)
                ]),
                React.createElement(TrendingDown, {
                  key: 'expenses-icon',
                  className: "text-red-500",
                  size: 24
                })
              ])
            ),
            
            React.createElement('div', {
              key: 'balance',
              className: `p-4 rounded-lg border-l-4 ${balance >= 0 ? 'bg-blue-50 border-blue-500' : 'bg-orange-50 border-orange-500'}`
            }, 
              React.createElement('div', {
                className: "flex items-center justify-between"
              }, [
                React.createElement('div', { key: 'balance-content' }, [
                  React.createElement('p', {
                    key: 'balance-label',
                    className: `text-sm font-medium ${balance >= 0 ? 'text-blue-600' : 'text-orange-600'}`
                  }, "Balance"),
                  React.createElement('p', {
                    key: 'balance-amount',
                    className: `text-2xl font-bold ${balance >= 0 ? 'text-blue-700' : 'text-orange-700'}`
                  }, `$${balance.toLocaleString('es-AR')}`)
                ]),
                React.createElement(DollarSign, {
                  key: 'balance-icon',
                  className: balance >= 0 ? 'text-blue-500' : 'text-orange-500',
                  size: 24
                })
              ])
            ),

            React.createElement('div', {
              key: 'count',
              className: "bg-gray-50 p-4 rounded-lg border-l-4 border-gray-500"
            }, 
              React.createElement('div', {
                className: "flex items-center justify-between"
              }, [
                React.createElement('div', { key: 'count-content' }, [
                  React.createElement('p', {
                    key: 'count-label',
                    className: "text-gray-600 text-sm font-medium"
                  }, "Transacciones"),
                  React.createElement('p', {
                    key: 'count-amount',
                    className: "text-2xl font-bold text-gray-700"
                  }, transactions.length)
                ]),
                React.createElement(Calendar, {
                  key: 'count-icon',
                  className: "text-gray-500",
                  size: 24
                })
              ])
            )
          ]),

          // Frase motivacional
          React.createElement('div', {
            key: 'motivation',
            className: `p-4 rounded-lg mb-6 text-center ${balance >= 0 ? 'bg-green-100 border border-green-300' : 'bg-yellow-100 border border-yellow-300'}`
          }, 
            React.createElement('p', {
              className: `text-lg font-medium ${balance >= 0 ? 'text-green-800' : 'text-yellow-800'}`
            }, getMotivationalQuote())
          ),

          // Formulario para agregar transacciones
          React.createElement('div', {
            key: 'form',
            className: "bg-gray-50 p-6 rounded-lg mb-6"
          }, [
            React.createElement('h2', {
              key: 'form-title',
              className: "text-xl font-semibold mb-4 text-gray-800"
            }, "Nueva TransacciÃ³n"),
            
            React.createElement('div', {
              key: 'form-grid',
              className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"
            }, [
              React.createElement('div', { key: 'type-field' }, [
                React.createElement('label', {
                  key: 'type-label',
                  className: "block text-sm font-medium text-gray-700 mb-2"
                }, "Tipo"),
                React.createElement('select', {
                  key: 'type-select',
                  value: type,
                  onChange: (e) => {
                    setType(e.target.value);
                    setCategory('');
                  },
                  className: "w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                }, [
                  React.createElement('option', { key: 'income-option', value: "income" }, "Ingreso"),
                  React.createElement('option', { key: 'expense-option', value: "expense" }, "Gasto")
                ])
              ]),
              
              React.createElement('div', { key: 'category-field' }, [
                React.createElement('label', {
                  key: 'category-label',
                  className: "block text-sm font-medium text-gray-700 mb-2"
                }, "CategorÃ­a"),
                React.createElement('select', {
                  key: 'category-select',
                  value: category,
                  onChange: (e) => setCategory(e.target.value),
                  className: "w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                }, [
                  React.createElement('option', { key: 'empty-option', value: "" }, "Seleccionar..."),
                  ...categories[type].map(cat => 
                    React.createElement('option', { key: cat, value: cat }, cat)
                  )
                ])
              ]),
              
              React.createElement('div', { key: 'description-field' }, [
                React.createElement('label', {
                  key: 'description-label',
                  className: "block text-sm font-medium text-gray-700 mb-2"
                }, "DescripciÃ³n"),
                React.createElement('input', {
                  key: 'description-input',
                  type: "text",
                  value: description,
                  onChange: (e) => setDescription(e.target.value),
                  placeholder: "Ej: Almuerzo, compras super, transporte...",
                  className: "w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                })
              ]),
              
              React.createElement('div', { key: 'amount-field' }, [
                React.createElement('label', {
                  key: 'amount-label',
                  className: "block text-sm font-medium text-gray-700 mb-2"
                }, "Monto"),
                React.createElement('input', {
                  key: 'amount-input',
                  type: "number",
                  value: amount,
                  onChange: (e) => setAmount(e.target.value),
                  placeholder: "0",
                  className: "w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                })
              ]),
              
              React.createElement('div', {
                key: 'button-field',
                className: "flex items-end"
              }, 
                React.createElement('button', {
                  onClick: addTransaction,
                  className: "w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center font-medium"
                }, [
                  React.createElement(type === 'income' ? PlusCircle : MinusCircle, {
                    key: 'button-icon',
                    size: 20,
                    className: "mr-2"
                  }),
                  "Agregar"
                ])
              )
            ])
          ]),

          // AnÃ¡lisis por categorÃ­as
          Object.keys(expensesByCategory).length > 0 && React.createElement('div', {
            key: 'categories',
            className: "bg-gray-50 p-6 rounded-lg mb-6"
          }, [
            React.createElement('h2', {
              key: 'categories-title',
              className: "text-xl font-semibold mb-4 text-gray-800"
            }, "Gastos por CategorÃ­a"),
            React.createElement('div', {
              key: 'categories-grid',
              className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
            }, 
              Object.entries(expensesByCategory).map(([categoryName, amount]) =>
                React.createElement('div', {
                  key: categoryName,
                  className: "bg-white p-3 rounded-lg border"
                }, [
                  React.createElement('p', {
                    key: 'cat-name',
                    className: "text-sm text-gray-600 font-medium"
                  }, categoryName),
                  React.createElement('p', {
                    key: 'cat-amount',
                    className: "text-lg font-bold text-red-600"
                  }, `$${amount.toLocaleString('es-AR')}`),
                  React.createElement('p', {
                    key: 'cat-percentage',
                    className: "text-xs text-gray-500"
                  }, `${((amount / totalExpenses) * 100).toFixed(1)}% del total`)
                ])
              )
            )
          ]),

          // Lista de transacciones
          React.createElement('div', { key: 'transactions' }, [
            React.createElement('h2', {
              key: 'transactions-title',
              className: "text-xl font-semibold mb-4 text-gray-800"
            }, "Historial de Transacciones"),
            React.createElement('div', {
              key: 'transactions-list',
              className: "space-y-3"
            }, 
              transactions.length === 0 ? 
                React.createElement('p', {
                  className: "text-gray-500 text-center py-8"
                }, "No hay transacciones registradas") :
                transactions.map(transaction => 
                  React.createElement('div', {
                    key: transaction.id,
                    className: `p-4 rounded-lg border-l-4 ${
                      transaction.type === 'income' ? 'bg-green-50 border-green-500' : 'bg-red-50 border-red-500'
                    }`
                  }, 
                    editingId === transaction.id ? 
                      React.createElement('div', {
                        className: "grid grid-cols-1 md:grid-cols-4 gap-3 items-center"
                      }, [
                        React.createElement('input', {
                          key: 'edit-desc',
                          type: "text",
                          value: editValues.description,
                          onChange: (e) => setEditValues({...editValues, description: e.target.value}),
                          className: "p-2 border rounded focus:ring-2 focus:ring-blue-500"
                        }),
                        React.createElement('select', {
                          key: 'edit-cat',
                          value: editValues.category,
                          onChange: (e) => setEditValues({...editValues, category: e.target.value}),
                          className: "p-2 border rounded focus:ring-2 focus:ring-blue-500"
                        }, 
                          categories[transaction.type].map(cat => 
                            React.createElement('option', { key: cat, value: cat }, cat)
                          )
                        ),
                        React.createElement('input', {
                          key: 'edit-amount',
                          type: "number",
                          value: editValues.amount,
                          onChange: (e) => setEditValues({...editValues, amount: e.target.value}),
                          className: "p-2 border rounded focus:ring-2 focus:ring-blue-500"
                        }),
                        React.createElement('div', {
                          key: 'edit-buttons',
                          className: "flex gap-2"
                        }, [
                          React.createElement('button', {
                            key: 'save-btn',
                            onClick: () => saveEdit(transaction.id),
                            className: "text-green-600 hover:text-green-700"
                          }, React.createElement(Save, { size: 18 })),
                          React.createElement('button', {
                            key: 'cancel-btn',
                            onClick: cancelEdit,
                            className: "text-gray-600 hover:text-gray-700"
                          }, React.createElement(X, { size: 18 }))
                        ])
                      ]) :
                      React.createElement('div', {
                        className: "flex justify-between items-center"
                      }, [
                        React.createElement('div', {
                          key: 'transaction-info',
                          className: "flex-1"
                        }, [
                          React.createElement('div', {
                            key: 'transaction-main',
                            className: "flex items-center gap-3"
                          }, [
                            React.createElement('span', {
                              key: 'transaction-amount',
                              className: `font-bold text-lg ${
                                transaction.type === 'income' ? 'text-green-700' : 'text-red-700'
                              }`
                            }, `${transaction.type === 'income' ? '+' : '-'}$${transaction.amount.toLocaleString('es-AR')}`),
                            React.createElement('span', {
                              key: 'transaction-desc',
                              className: "text-gray-700 font-medium"
                            }, transaction.description)
                          ]),
                          React.createElement('div', {
                            key: 'transaction-meta',
                            className: "flex items-center gap-3 mt-1"
                          }, [
                            React.createElement('span', {
                              key: 'transaction-cat',
                              className: "text-sm bg-gray-200 px-2 py-1 rounded"
                            }, transaction.category),
                            React.createElement('span', {
                              key: 'transaction-date',
                              className: "text-sm text-gray-500"
                            }, transaction.date)
                          ])
                        ]),
                        React.createElement('div', {
                          key: 'transaction-actions',
                          className: "flex gap-2"
                        }, [
                          React.createElement('button', {
                            key: 'edit-btn',
                            onClick: () => startEditing(transaction),
                            className: "text-blue-600 hover:text-blue-700 p-1"
                          }, React.createElement(Edit2, { size: 16 })),
                          React.createElement('button', {
                            key: 'delete-btn',
                            onClick: () => deleteTransaction(transaction.id),
                            className: "text-red-600 hover:text-red-700 p-1"
                          }, React.createElement(Trash2, { size: 16 }))
                        ])
                      ])
                  )
                )
            )
          ])
        ])
      );
    };

    ReactDOM.render(React.createElement(ExpenseTracker), document.getElementById('root'));
  </script>
</body>
</html>