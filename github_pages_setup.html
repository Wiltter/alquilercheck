<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Checklist de Alquiler (AR) — Preguntas + Respuestas</title>
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --panel:#111827; /* gray-900 */
      --muted:#94a3b8; /* slate-400 */
      --ink:#e5e7eb;   /* gray-200 */
      --accent:#22d3ee;/* cyan-400 */
      --ok:#10b981;    /* emerald-500 */
      --warn:#f59e0b;  /* amber-500 */
      --danger:#ef4444;/* red-500 */
      --border:#1f2937;/* gray-800 */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue",Arial,sans-serif;
      background:var(--bg); color:var(--ink);
    }
    header{position:sticky; top:0; z-index:50; background:rgba(15,23,42,.9); backdrop-filter: blur(6px); border-bottom:1px solid var(--border)}
    .wrap{max-width:1000px; margin:auto; padding:16px}
    h1{margin:8px 0 4px; font-size: clamp(22px, 3vw, 34px)}
    .sub{color:var(--muted); font-size:14px}
    .grid{display:grid; grid-template-columns: 1fr; gap:16px}
    @media(min-width:900px){.grid{grid-template-columns: 1fr 1fr}}
    section.card{border:1px solid var(--border); background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00)); border-radius:14px; padding:16px}
    section.card h2{margin:0 0 8px; font-size:18px; color:#fff}
    .q{margin:10px 0; padding-top:8px; border-top:1px dashed var(--border)}
    label{display:block; font-weight:600; margin:0 0 6px}
    .hint{color:var(--muted); font-size:12px; margin: 2px 0 8px}
    textarea{width:100%; min-height:72px; resize:vertical; background:#0b1220; color:#e5e7eb; border:1px solid var(--border); border-radius:10px; padding:10px}
    .toolbar{display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin:12px 0}
    button{cursor:pointer; border:1px solid var(--border); background:#0b1220; color:#e5e7eb; padding:10px 12px; border-radius:10px; font-weight:600}
    button.primary{background:var(--accent); color:#001018; border-color:transparent}
    button.ok{background:var(--ok); color:#072b1b; border-color:transparent}
    button.warn{background:var(--warn); color:#1c1400; border-color:transparent}
    button.danger{background:var(--danger); color:#2a0707; border-color:transparent}
    .row{display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap}
    .progress{height:10px; background:#0b1220; border:1px solid var(--border); border-radius:999px; overflow:hidden; flex:1}
    .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), #60a5fa)}
    .pill{font-size:12px; color:var(--muted)}
    footer{color:var(--muted); font-size:12px; text-align:center; padding:24px}
    .note{font-size:12px; color:var(--muted)}
    details{border:1px dashed var(--border); border-radius:10px; padding:8px 10px}
    summary{cursor:pointer; font-weight:700}
    .add{display:flex; gap:8px; margin-top:8px}
    input[type="text"]{width:100%; background:#0b1220; color:#e5e7eb; border:1px solid var(--border); border-radius:10px; padding:10px}
    .tag{display:inline-block; font-size:11px; color:#0d1b2a; background:var(--accent); padding:2px 8px; border-radius:999px; margin-left:8px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="row">
        <div>
          <h1>Checklist de Alquiler (Argentina)</h1>
          <div class="sub">Preguntas clave + caja para anotar respuestas. Guarda todo <strong>en tu navegador</strong> (local) automáticamente.</div>
        </div>
        <div class="row" style="gap:8px">
          <button class="primary" id="exportJson">Exportar respuestas (.json)</button>
          <button class="ok" id="exportTxt">Exportar (.txt)</button>
          <button class="warn" id="printIt">Imprimir</button>
          <button class="danger" id="clearAll">Limpiar todo</button>
        </div>
      </div>
      <div class="row" style="margin-top:8px">
        <div class="progress"><div class="bar" id="bar"></div></div>
        <div class="pill"><span id="count">0</span>/<span id="total">0</span> respondidas</div>
      </div>
    </div>
  </header>

  <main class="wrap" style="padding-top:12px">

    <details style="margin-bottom:16px"><summary>Consejo rápido</summary>
      <div class="note">Escribí corto y claro. Si algo debe quedar por contrato, marcá la respuesta con <strong>[PONER EN CONTRATO]</strong> para no olvidarlo. Podés añadir tus propias preguntas al final.</div>
    </details>

    <div class="grid" id="sections"><!-- JS injects sections here --></div>

    <section class="card">
      <h2>Agregar pregunta propia <span class="tag">Personalizable</span></h2>
      <div class="add">
        <input id="customQuestion" type="text" placeholder="Escribí tu pregunta" />
        <button id="addQuestion">Agregar</button>
      </div>
    </section>

  </main>

  <footer>
    Hecho por y para inquilinos en AR. Tus datos quedan en tu dispositivo (LocalStorage). 
  </footer>

  <script>
    const DATA_KEY = 'alquiler_ar_checklist_v1';

    const schema = [
      {title:'Contrato y moneda', qs:[
        '¿En qué moneda está el alquiler? ¿ARS o USD?',
        'Si es en USD, ¿aceptan pago en pesos? ¿A qué tipo de cambio exacto?',
        '¿Cada cuánto ajusta y con qué índice está escrito?',
        '¿Cuál es el plazo exacto del contrato (inicio/fin)?'
      ]},
      {title:'Costos y comisiones', qs:[
        '¿Cuánto piden de depósito y cómo/ cuándo lo devuelven?',
        '¿Quién paga comisión inmobiliaria y de cuánto es?',
        '¿Qué impuestos/tasas pago yo y cuáles paga el dueño?'
      ]},
      {title:'Expensas y servicios', qs:[
        '¿Expensas ordinarias a mi cargo? ¿Y extraordinarias?',
        'Mostrame la última liquidación de expensas y si hay deudas.',
        '¿Quién transfiere luz, gas, agua e internet y desde cuándo pago yo?'
      ]},
      {title:'Garantías', qs:[
        '¿Qué garantías aceptan? (propietaria, seguro de caución, recibos de sueldo)',
        'Para caución: ingresos mínimos, costo anual y qué cubre (alquiler/expensas/daños)'
      ]},
      {title:'Estado del inmueble', qs:[
        '¿Puedo probar gas, electricidad, agua y calefacción en vivo?',
        '¿Entregan inventario con fotos, medidores y estado de artefactos?',
        '¿Hay humedad/filtraciones previas o arreglos recientes?'
      ]},
      {title:'Reparaciones y mantenimiento', qs:[
        '¿Quién paga qué reparación y tiempos de respuesta en urgencias?',
        'Si no responden, ¿puedo reparar y descontar hasta un tope acordado?'
      ]},
      {title:'Reglas y uso', qs:[
        '¿Se permiten mascotas y hay restricciones de ruidos/horarios?',
        '¿Puedo trabajar desde casa (creador de contenido/home office)?',
        '¿Depósito/bicicletero/baulera incluidos? ¿Cochera y costo?'
      ]},
      {title:'Rescisión, mora y entrega', qs:[
        '¿Cláusula de salida anticipada (penalidad y preaviso)?',
        '¿Intereses por mora y días de gracia?',
        'Criterios de “daño” al devolver (cómo se evalúa)'
      ]},
      {title:'Forma de pago y respaldo', qs:[
        '¿Cómo pago (transferencia, billetera, efectivo) y quién emite recibo/factura?',
        '¿Se registra algo ante AFIP? (igual quiero contrato y recibos)'
      ]},
      {title:'Alquiler temporario (si aplica)', qs:[
        '¿Está permitido por reglamento/municipio y está registrado si corresponde?',
        '¿Condiciones exactas de estadía, limpieza, gastos y renovaciones?'
      ]}
    ];

    // Load / Save
    const state = JSON.parse(localStorage.getItem(DATA_KEY) || '{}');

    function qId(sectionTitle, idx){
      return sectionTitle.toLowerCase().replace(/[^a-z0-9]+/g,'-')+"__"+idx;
    }

    function render(){
      const container = document.getElementById('sections');
      container.innerHTML = '';

      let total = 0, answered = 0;

      schema.forEach(block => {
        const sec = document.createElement('section');
        sec.className = 'card';

        const h = document.createElement('h2');
        h.textContent = block.title;
        sec.appendChild(h);

        block.qs.forEach((q, i)=>{
          total++;
          const id = qId(block.title, i);
          const val = state[id] || '';
          if(val.trim().length) answered++;

          const wrap = document.createElement('div');
          wrap.className = 'q';

          const label = document.createElement('label');
          label.setAttribute('for', id);
          label.textContent = q;
          wrap.appendChild(label);

          const hint = document.createElement('div');
          hint.className = 'hint';
          hint.textContent = 'Respuesta / acuerdos / cosas para poner en contrato';
          wrap.appendChild(hint);

          const ta = document.createElement('textarea');
          ta.id = id;
          ta.placeholder = 'Escribí la respuesta aquí…';
          ta.value = val;
          ta.addEventListener('input', e=>{
            state[id] = e.target.value;
            localStorage.setItem(DATA_KEY, JSON.stringify(state));
            updateProgress();
          });
          wrap.appendChild(ta);

          sec.appendChild(wrap);
        });

        container.appendChild(sec);
      });

      document.getElementById('total').textContent = total;
      updateProgress();
    }

    function updateProgress(){
      const all = document.querySelectorAll('textarea');
      const total = all.length;
      let answered = 0;
      all.forEach(t=>{ if(t.value.trim().length) answered++; });
      const pct = total ? Math.round((answered/total)*100) : 0;
      document.getElementById('count').textContent = answered;
      document.getElementById('total').textContent = total;
      document.getElementById('bar').style.width = pct + '%';
    }

    // Export helpers
    function download(filename, text){
      const el = document.createElement('a');
      el.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
      el.setAttribute('download', filename);
      el.style.display = 'none';
      document.body.appendChild(el);
      el.click();
      el.remove();
    }

    document.getElementById('exportJson').addEventListener('click', ()=>{
      const payload = { createdAt: new Date().toISOString(), data:{} };
      document.querySelectorAll('textarea').forEach(t=> payload.data[t.id] = t.value);
      download('respuestas_alquiler.json', JSON.stringify(payload, null, 2));
    });

    document.getElementById('exportTxt').addEventListener('click', ()=>{
      let lines = [];
      schema.forEach(block=>{
        lines.push('# ' + block.title);
        block.qs.forEach((q,i)=>{
          const id = qId(block.title, i);
          lines.push('\n• ' + q + '\n' + (state[id]||'') + '\n');
        });
        lines.push('\n');
      });
      download('respuestas_alquiler.txt', lines.join('\n'));
    });

    document.getElementById('printIt').addEventListener('click', ()=> window.print());

    document.getElementById('clearAll').addEventListener('click', ()=>{
      if(confirm('Esto borrará todas las respuestas guardadas en este navegador. ¿Continuar?')){
        localStorage.removeItem(DATA_KEY);
        for(const k in state) delete state[k];
        render();
      }
    });

    document.getElementById('addQuestion').addEventListener('click', ()=>{
      const input = document.getElementById('customQuestion');
      const text = input.value.trim();
      if(!text) return;
      // Push to last section (Alquiler temporario) or create extra section
      const last = schema[schema.length-1];
      if(!last || last.title !== 'Personalizadas'){
        schema.push({title:'Personalizadas', qs:[]});
      }
      const idx = schema.findIndex(s=>s.title==='Personalizadas');
      schema[idx].qs.push(text);
      input.value='';
      render();
      window.scrollTo({top:document.body.scrollHeight, behavior:'smooth'});
    });

    // Init
    render();
  </script>
</body>
</html>
